<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EliteCAD Tools - Revit Add-ins</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <style>
        :root {
            --bg: #0F0F12;
            --surface: #18181D;
            --surface2: #222229;
            --border: #2E2E38;
            --border-light: #3D3D4A;
            --text: #E8E8ED;
            --text-dim: #9898A8;
            --text-muted: #5A5A6A;

            --scan: #5ED5DD;
            --scan-dim: rgba(94, 213, 221, 0.12);
            --draft: #F5B878;
            --draft-dim: rgba(245, 184, 120, 0.12);
            --coord: #6EE7A8;
            --coord-dim: rgba(110, 231, 168, 0.12);
            --core: #A78BFA;
            --core-dim: rgba(167, 139, 250, 0.12);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Space Grotesk', sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            overflow: hidden;
        }

        /* Dot grid background */
        .tech-grid-bg {
            background-image:
                linear-gradient(rgba(46, 46, 56, 0.3) 1px, transparent 1px),
                linear-gradient(90deg, rgba(46, 46, 56, 0.3) 1px, transparent 1px);
            background-size: 20px 20px;
        }

        .app {
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 24px;
            border-bottom: 1px solid var(--border);
            background: var(--surface);
            z-index: 10;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo-icon {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, var(--surface2), var(--bg));
            border: 1px solid var(--border-light);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text);
        }

        .logo-text h1 {
            font-size: 16px;
            font-weight: 700;
        }

        .logo-text h1 span {
            font-weight: 400;
            color: var(--text-dim);
        }

        .logo-text p {
            font-family: 'Space Mono', monospace;
            font-size: 10px;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .status {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 6px 12px;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 4px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .status-text {
            font-family: 'Space Mono', monospace;
            font-size: 11px;
            color: var(--text-dim);
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 4px;
            padding: 8px 16px 0;
            background: var(--bg);
            border-bottom: 1px solid var(--border);
        }

        .tab {
            position: relative;
            padding: 10px 24px;
            background: transparent;
            border: 1px solid transparent;
            border-bottom: none;
            border-radius: 4px 4px 0 0;
            font-family: 'Space Grotesk', sans-serif;
            font-size: 13px;
            font-weight: 500;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.15s;
        }

        .tab:hover {
            color: var(--text-dim);
        }

        .tab.active {
            background: var(--surface);
            border-color: var(--border);
        }

        .tab.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            right: 0;
            height: 1px;
            background: var(--surface);
        }

        .tab.active::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
        }

        .tab.active[data-region="scan"] { color: var(--scan); }
        .tab.active[data-region="scan"]::before { background: var(--scan); }
        .tab.active[data-region="draft"] { color: var(--draft); }
        .tab.active[data-region="draft"]::before { background: var(--draft); }
        .tab.active[data-region="coord"] { color: var(--coord); }
        .tab.active[data-region="coord"]::before { background: var(--coord); }
        .tab.active[data-region="core"] { color: var(--core); }
        .tab.active[data-region="core"]::before { background: var(--core); }

        /* Ribbon */
        .ribbon {
            display: flex;
            height: 120px;
            background: var(--surface);
            border-bottom: 1px solid var(--border);
            overflow-x: auto;
            padding: 0 16px;
        }

        .ribbon::-webkit-scrollbar {
            height: 6px;
        }

        .ribbon::-webkit-scrollbar-track {
            background: var(--bg);
        }

        .ribbon::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 3px;
        }

        .panel {
            display: flex;
            flex-direction: column;
            border-right: 1px solid var(--border);
            padding: 0 8px;
            min-width: max-content;
        }

        .panel-tools {
            display: flex;
            flex: 1;
            align-items: center;
            gap: 4px;
            padding: 8px 4px;
        }

        .panel-label {
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--surface);
            border-top: 1px solid var(--border);
            margin: 0 -8px;
            padding: 0 8px;
        }

        .panel-label span {
            font-family: 'Space Mono', monospace;
            font-size: 9px;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--text-muted);
        }

        /* Tool Button */
        .tool-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            width: 64px;
            height: 72px;
            padding: 8px 4px;
            background: transparent;
            border: 1px solid transparent;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.15s;
        }

        .tool-btn:hover {
            background: var(--surface2);
            border-color: var(--border);
        }

        .tool-btn.selected {
            border-color: var(--border-light);
        }

        .tool-btn .icon {
            width: 28px;
            height: 28px;
            color: var(--text);
            transition: color 0.15s;
        }

        .tool-btn .label {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 9px;
            font-weight: 500;
            color: var(--text);
            text-align: center;
            line-height: 1.2;
            max-width: 100%;
            overflow: hidden;
        }

        /* Selected states by region */
        [data-active-region="scan"] .tool-btn.selected { background: var(--scan-dim); border-color: var(--scan); }
        [data-active-region="scan"] .tool-btn.selected .icon { color: var(--scan); }
        [data-active-region="scan"] .tool-btn.selected .label { color: var(--scan); }

        [data-active-region="draft"] .tool-btn.selected { background: var(--draft-dim); border-color: var(--draft); }
        [data-active-region="draft"] .tool-btn.selected .icon { color: var(--draft); }
        [data-active-region="draft"] .tool-btn.selected .label { color: var(--draft); }

        [data-active-region="coord"] .tool-btn.selected { background: var(--coord-dim); border-color: var(--coord); }
        [data-active-region="coord"] .tool-btn.selected .icon { color: var(--coord); }
        [data-active-region="coord"] .tool-btn.selected .label { color: var(--coord); }

        [data-active-region="core"] .tool-btn.selected { background: var(--core-dim); border-color: var(--core); }
        [data-active-region="core"] .tool-btn.selected .icon { color: var(--core); }
        [data-active-region="core"] .tool-btn.selected .label { color: var(--core); }

        /* Main Content */
        .main-content {
            flex: 1;
            display: flex;
            overflow: hidden;
            position: relative;
        }

        .main-content.tech-grid-bg {
            padding: 32px;
        }

        .content-wrapper {
            flex: 1;
            display: flex;
            flex-direction: column;
            max-width: 1100px;
            margin: 0 auto;
            width: 100%;
        }

        /* Breadcrumb */
        .breadcrumb {
            font-family: 'Space Mono', monospace;
            font-size: 11px;
            color: var(--text-muted);
            margin-bottom: 16px;
        }

        .breadcrumb .current {
            color: var(--text-dim);
        }

        /* Detail Card */
        .detail-card {
            flex: 1;
            display: flex;
            background: var(--surface);
            border: 1px solid var(--border);
            overflow: hidden;
        }

        .detail-main {
            flex: 1;
            padding: 32px;
            overflow-y: auto;
        }

        .detail-header {
            display: flex;
            align-items: center;
            gap: 20px;
            padding-bottom: 24px;
            margin-bottom: 24px;
            border-bottom: 1px solid var(--border);
        }

        .detail-icon {
            width: 64px;
            height: 64px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--surface2);
            border: 1px solid var(--border);
            border-radius: 6px;
        }

        .detail-icon i {
            width: 36px;
            height: 36px;
        }

        .detail-title h2 {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .detail-badges {
            display: flex;
            gap: 8px;
        }

        .badge {
            font-family: 'Space Mono', monospace;
            font-size: 10px;
            padding: 4px 10px;
            background: var(--surface2);
            color: var(--text-dim);
            text-transform: uppercase;
        }

        .badge.active {
            background: var(--scan-dim);
            color: var(--scan);
        }

        [data-active-region="draft"] .badge.active { background: var(--draft-dim); color: var(--draft); }
        [data-active-region="coord"] .badge.active { background: var(--coord-dim); color: var(--coord); }
        [data-active-region="core"] .badge.active { background: var(--core-dim); color: var(--core); }

        .detail-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-bottom: 32px;
        }

        .detail-section h3 {
            font-family: 'Space Mono', monospace;
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            color: var(--text-muted);
            margin-bottom: 12px;
        }

        .detail-box {
            padding: 16px;
            background: var(--surface);
            border: 1px solid var(--border);
            border-left: 3px solid var(--scan);
            height: 120px;
            overflow-y: auto;
        }

        .detail-box::-webkit-scrollbar {
            width: 6px;
        }

        .detail-box::-webkit-scrollbar-track {
            background: var(--bg);
        }

        .detail-box::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 3px;
        }

        .detail-box-large {
            height: 200px;
        }

        [data-active-region="draft"] .detail-box { border-left-color: var(--draft); }
        [data-active-region="coord"] .detail-box { border-left-color: var(--coord); }
        [data-active-region="core"] .detail-box { border-left-color: var(--core); }

        .detail-box p {
            font-size: 14px;
            line-height: 1.7;
            color: var(--text);
        }

        .detail-box.mono p {
            font-family: 'Space Mono', monospace;
            font-size: 12px;
            color: var(--text-dim);
        }

        .detail-meta {
            display: flex;
            gap: 16px;
        }

        .meta-item {
            flex: 1;
            padding: 12px 16px;
            background: var(--surface2);
            border: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .meta-item .label {
            font-family: 'Space Mono', monospace;
            font-size: 10px;
            text-transform: uppercase;
            color: var(--text-muted);
        }

        .meta-item .value {
            font-family: 'Space Mono', monospace;
            font-size: 12px;
            color: var(--text);
        }

        /* Sidebar */
        .detail-sidebar {
            width: 280px;
            background: var(--bg);
            border-left: 1px solid var(--border);
            padding: 24px;
            display: flex;
            flex-direction: column;
        }

        .sidebar-title {
            font-family: 'Space Mono', monospace;
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            color: var(--text-muted);
            margin-bottom: 20px;
        }

        .sidebar-props {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .prop {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .prop .label {
            font-family: 'Space Mono', monospace;
            font-size: 11px;
            color: var(--text-muted);
        }

        .prop .value {
            font-family: 'Space Mono', monospace;
            font-size: 12px;
            color: var(--text);
        }

        .prop .color-value {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .color-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        /* Download Section */
        .download-section {
            margin-top: auto;
            padding-top: 24px;
            border-top: 1px solid var(--border);
        }

        .download-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            width: 100%;
            padding: 14px;
            background: var(--scan);
            color: var(--bg);
            font-family: 'Space Mono', monospace;
            font-size: 12px;
            font-weight: 700;
            text-decoration: none;
            border: none;
            cursor: pointer;
            transition: all 0.15s;
        }

        .download-btn:hover {
            filter: brightness(1.1);
        }

        [data-active-region="draft"] .download-btn { background: var(--draft); }
        [data-active-region="coord"] .download-btn { background: var(--coord); }
        [data-active-region="core"] .download-btn { background: var(--core); }

        .download-btn i {
            width: 18px;
            height: 18px;
        }

        .download-info {
            margin-top: 12px;
            text-align: center;
            font-family: 'Space Mono', monospace;
            font-size: 10px;
            color: var(--text-muted);
        }

        /* Empty state */
        .empty-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            color: var(--text-muted);
            opacity: 0.5;
        }

        .empty-state i {
            width: 48px;
            height: 48px;
            margin-bottom: 16px;
        }

        .empty-state span {
            font-family: 'Space Mono', monospace;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        @media (max-width: 900px) {
            .detail-grid {
                grid-template-columns: 1fr;
            }
            .detail-sidebar {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="app" data-active-region="scan">
        <!-- Header -->
        <header>
            <div class="logo">
                <div class="logo-icon">
                    <i data-lucide="box" style="width: 18px; height: 18px;"></i>
                </div>
                <div class="logo-text">
                    <h1>EliteCAD<span>Tools</span></h1>
                    <p>Ribbon Configuration System v1.0</p>
                </div>
            </div>
            <div class="header-right">
                <div class="status">
                    <div class="status-dot" style="background: var(--scan);"></div>
                    <span class="status-text">System Active</span>
                </div>
            </div>
        </header>

        <!-- Tabs -->
        <div class="tabs">
            <button class="tab active" data-region="scan">ELITE SCAN</button>
            <button class="tab" data-region="draft">ELITE DRAFT</button>
            <button class="tab" data-region="coord">ELITE COORD</button>
            <button class="tab" data-region="core">ELITE CORE</button>
        </div>

        <!-- Ribbon -->
        <div class="ribbon" id="ribbon">
            <!-- Populated by JS -->
        </div>

        <!-- Main Content -->
        <div class="main-content tech-grid-bg">
            <div class="content-wrapper">
                <div class="breadcrumb">
                    <span id="breadcrumb-region">ELITE SCAN</span> / <span class="current" id="breadcrumb-tool">Select Tool</span>
                </div>

                <div class="detail-card">
                    <div class="detail-main" id="detail-main">
                        <div class="empty-state">
                            <i data-lucide="activity"></i>
                            <span>Select a tool to view specifications</span>
                        </div>
                    </div>

                    <div class="detail-sidebar">
                        <h4 class="sidebar-title">Properties</h4>
                        <div class="sidebar-props">
                            <div class="prop">
                                <span class="label">Status</span>
                                <span class="value">Production Ready</span>
                            </div>
                            <div class="prop">
                                <span class="label">Add-in</span>
                                <span class="value" id="sidebar-addin">EliteScan</span>
                            </div>
                            <div class="prop">
                                <span class="label">Revit Versions</span>
                                <span class="value">2022 - 2026</span>
                            </div>
                        </div>

                        <div class="download-section">
                            <a href="https://github.com/kamditis/kamditis.github.io/releases/latest/download/EliteScan-Setup.exe" class="download-btn" id="download-btn">
                                <i data-lucide="download"></i>
                                <span>Download</span>
                            </a>
                            <p class="download-info" id="download-info">EliteScan-Setup.exe</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Data
        const REGIONS = {
            scan: {
                id: 'scan',
                name: 'EliteScan',
                label: 'ELITE SCAN',
                color: '#5ED5DD',
                colorVar: 'var(--scan)',
                downloadUrl: 'https://github.com/kamditis/kamditis.github.io/releases/latest/download/EliteScan-Setup.exe',
                downloadFile: 'EliteScan-Setup.exe',
                panels: [
                    {
                        title: 'Analysis',
                        tools: [
                            { id: 'place_scans', label: 'Place Scans', icon: 'target', fn: 'Places scan origin points in the model for point cloud deviation analysis. User selects locations where scans were taken.', videoRef: '', changelog: '' },
                            { id: 'run_analysis', label: 'Run Analysis', icon: 'play', fn: 'Executes point cloud deviation analysis comparing model geometry against scan data. Calculates per-element deviations and assigns A-F grades.', videoRef: '', changelog: '' },
                            { id: 'view_report', label: 'View Report', icon: 'file-text', fn: 'Opens the HTML deviation analysis report showing element grades, statistics, and deviation heat maps.', videoRef: '', changelog: '' },
                            { id: 'settings', label: 'Settings', icon: 'settings', fn: 'Opens the ScanAnalysis settings dialog for configuring tolerances, grade thresholds, and report options.', videoRef: '', changelog: '' },
                        ]
                    },
                    {
                        title: 'Viewer',
                        tools: [
                            { id: '360_viewer', label: '360 Viewer', icon: 'globe', fn: 'Launches a standalone window to view 360° panorama images from scan locations.', videoRef: '', changelog: '' },
                            { id: '360_pane', label: '360 Pane', icon: 'maximize', fn: 'Opens/toggles the dockable 360° panorama pane within Revit for persistent viewing while working.', videoRef: '', changelog: '' },
                        ]
                    },
                    {
                        title: 'Overlay',
                        tools: [
                            { id: 'show_overlay', label: 'Show Overlay', icon: 'layers', fn: 'Displays color-coded deviation overlay on model elements in the active view. Elements colored by grade (green=A, red=F).', videoRef: '', changelog: '' },
                            { id: 'clear_overlay', label: 'Clear Overlay', icon: 'eye-off', fn: 'Removes the deviation color overlay from the view, restoring normal element appearance.', videoRef: '', changelog: '' },
                        ]
                    },
                    {
                        title: 'Point Clouds',
                        tools: [
                            { id: 'revit_2_recap', label: 'Revit 2 ReCap', icon: 'share', fn: 'Exports selected Revit geometry to ReCap for comparison with point cloud data. Creates RCS/RCP files.', videoRef: '', changelog: '' },
                            { id: 'cloud_reset', label: 'Cloud Reset', icon: 'refresh-cw', fn: 'Resets point cloud visibility and graphics overrides to default state. Useful after analysis sessions.', videoRef: '', changelog: '' },
                        ]
                    }
                ]
            },
            draft: {
                id: 'draft',
                name: 'EliteDraft',
                label: 'ELITE DRAFT',
                color: '#F5B878',
                colorVar: 'var(--draft)',
                downloadUrl: 'https://github.com/kamditis/kamditis.github.io/releases/latest/download/EliteDraft-Setup.exe',
                downloadFile: 'EliteDraft-Setup.exe',
                panels: [
                    {
                        title: 'Hangers',
                        tools: [
                            { id: 'hanger_settings', label: 'Hanger Settings', icon: 'wrench', fn: 'Opens the hanger configuration dialog for setting rod sizes, spacing rules, trapeze preferences, and load calculations.', videoRef: '', changelog: '' },
                            { id: 'single_pipes', label: 'Single Pipes', icon: 'anchor', rotate: true, fn: 'Places individual pipe hangers on selected pipe runs. Calculates spacing based on pipe size and settings.', videoRef: '', changelog: '' },
                            { id: 'pipe_rack', label: 'Pipe Rack', icon: 'grip-horizontal', fn: 'Places trapeze-style hangers for multiple parallel pipes. Creates shared support structure for pipe racks.', videoRef: '', changelog: '' },
                            { id: 'duct_hangers', label: 'Duct Hangers', icon: 'container', fn: 'Places hangers on rectangular or round ductwork. Supports trapeze and individual hanger styles.', videoRef: '', changelog: '' },
                            { id: 'trapeze_layout', label: 'Trapeze Layout', icon: 'gallery-horizontal', fn: 'Automatically lays out trapeze hangers along selected duct/pipe runs at calculated intervals.', videoRef: '', changelog: '' },
                            { id: 'adjust_trapeze', label: 'Adjust Trapeze', icon: 'sliders-horizontal', fn: 'Modifies existing trapeze hanger positions, elevations, or configurations. Interactive adjustment tool.', videoRef: '', changelog: '' },
                            { id: 'audit_hangers', label: 'Audit Hangers', icon: 'clipboard-check', fn: 'Scans the model for hanger issues: missing supports, incorrect spacing, undersized rods. Generates report.', videoRef: '', changelog: '' },
                            { id: 'fill_parameters', label: 'Fill Parameters', icon: 'pencil', fn: 'Batch-fills hanger family parameters (rod length, load, size) based on connected elements and calculations.', videoRef: '', changelog: '' },
                        ]
                    },
                    {
                        title: 'Annotation',
                        tools: [
                            { id: 'tag_size', label: 'Tag Size', icon: 'tag', fn: 'Places or updates size tags on selected ductwork/piping showing dimensions (e.g., "24x12", "6" Ø").', videoRef: '', changelog: '' },
                            { id: 'tag_lengths', label: 'Tag Lengths', icon: 'ruler', fn: 'Tags pipe/duct segments with their lengths. Useful for cut lists and quantity takeoffs.', videoRef: '', changelog: '' },
                            { id: 'elbow_extension', label: 'Elbow Extension', icon: 'corner-down-right', fn: 'Annotates elbows with extension/takeoff dimensions for fabrication. Shows centerline-to-end measurements.', videoRef: '', changelog: '' },
                            { id: 'transitions', label: 'Transitions', icon: 'filter', fn: 'Tags transition fittings with size change information (e.g., "12×8 to 10×6").', videoRef: '', changelog: '' },
                            { id: 'batch_spools', label: 'Batch Spools', icon: 'list-ordered', fn: 'Automatically generates spool tags/numbers for piping assemblies. Creates fabrication spool drawings.', videoRef: '', changelog: '' },
                            { id: 'renumber', label: 'Renumber', icon: 'hash', fn: 'Renumbers selected tags or elements sequentially. Allows setting start number and prefix.', videoRef: '', changelog: '' },
                        ]
                    },
                    {
                        title: 'View',
                        tools: [
                            { id: 'isolate_service', label: 'Isolate Service', icon: 'eye', fn: 'Isolates elements by system/service type in the current view. Quick filter for mechanical systems.', videoRef: '', changelog: '' },
                            { id: 'hide_service', label: 'Hide Service', icon: 'eye-off', fn: 'Hides elements by system/service type in the current view. Opposite of Isolate.', videoRef: '', changelog: '' },
                        ]
                    }
                ]
            },
            coord: {
                id: 'coord',
                name: 'EliteCoord',
                label: 'ELITE COORD',
                color: '#6EE7A8',
                colorVar: 'var(--coord)',
                downloadUrl: 'https://github.com/kamditis/kamditis.github.io/releases/latest/download/EliteCoord-Setup.exe',
                downloadFile: 'EliteCoord-Setup.exe',
                panels: [
                    {
                        title: 'Export',
                        tools: [
                            { id: 'dwg_overrides', label: 'DWG Overrides', icon: 'file-output', fn: 'Configures layer/color mappings for DWG export. Ensures consistent CAD standards when exporting.', videoRef: '', changelog: '' },
                            { id: 'material_mapping', label: 'Material Mapping', icon: 'palette', fn: 'Maps Revit materials to Navisworks appearance definitions for consistent visualization in coordination models.', videoRef: '', changelog: '' },
                        ]
                    },
                    {
                        title: 'Views',
                        tools: [
                            { id: 'section_box', label: 'Section Box', icon: 'box', fn: 'Creates a 3D view with section box tightly cropped to selected elements. Quick coordination box.', videoRef: '', changelog: '' },
                            { id: '3d_view', label: '3D View', icon: 'cuboid', fn: 'Creates a new 3D view from current camera position or selected scope. Quick view generation.', videoRef: '', changelog: '' },
                        ]
                    },
                    {
                        title: 'Clash',
                        tools: [
                            { id: 'clash_viewer', label: 'Clash Viewer', icon: 'alert-triangle', fn: 'Opens the clash visualization pane showing Navisworks clash results overlaid on Revit elements.', videoRef: '', changelog: '' },
                        ]
                    }
                ]
            },
            core: {
                id: 'core',
                name: 'EliteCore',
                label: 'ELITE CORE',
                color: '#A78BFA',
                colorVar: 'var(--core)',
                downloadUrl: 'https://github.com/kamditis/kamditis.github.io/releases/latest/download/EliteCore-Setup.exe',
                downloadFile: 'EliteCore-Setup.exe',
                panels: [
                    {
                        title: 'Project Setup',
                        tools: [
                            { id: 'user_workset', label: 'User Workset', icon: 'user', fn: 'Creates a user-specific workset (named after current user) for organizing user-owned elements.', videoRef: '', changelog: '' },
                            { id: 'link_worksets', label: 'Link Worksets', icon: 'link', fn: 'Associates linked models with dedicated worksets for better visibility control and organization.', videoRef: '', changelog: '' },
                        ]
                    }
                ]
            }
        };

        // State
        let activeRegion = 'scan';
        let selectedTool = null;

        // Elements
        const app = document.querySelector('.app');
        const tabs = document.querySelectorAll('.tab');
        const ribbon = document.getElementById('ribbon');
        const detailMain = document.getElementById('detail-main');
        const breadcrumbRegion = document.getElementById('breadcrumb-region');
        const breadcrumbTool = document.getElementById('breadcrumb-tool');
        const sidebarAddin = document.getElementById('sidebar-addin');
        const downloadBtn = document.getElementById('download-btn');
        const downloadInfo = document.getElementById('download-info');
        const statusDot = document.querySelector('.status-dot');

        // Functions
        function renderRibbon(regionId) {
            const region = REGIONS[regionId];
            ribbon.innerHTML = '';

            region.panels.forEach(panel => {
                const panelEl = document.createElement('div');
                panelEl.className = 'panel';

                const toolsEl = document.createElement('div');
                toolsEl.className = 'panel-tools';

                panel.tools.forEach(tool => {
                    const btn = document.createElement('button');
                    btn.className = 'tool-btn';
                    btn.dataset.toolId = tool.id;

                    const iconStyle = tool.rotate ? 'transform: rotate(180deg);' : '';
                    btn.innerHTML = `
                        <i data-lucide="${tool.icon}" class="icon" style="${iconStyle}"></i>
                        <span class="label">${tool.label}</span>
                    `;

                    btn.addEventListener('click', () => selectTool(tool));
                    toolsEl.appendChild(btn);
                });

                const labelEl = document.createElement('div');
                labelEl.className = 'panel-label';
                labelEl.innerHTML = `<span>${panel.title}</span>`;

                panelEl.appendChild(toolsEl);
                panelEl.appendChild(labelEl);
                ribbon.appendChild(panelEl);
            });

            lucide.createIcons();
        }

        function selectTool(tool) {
            selectedTool = tool;

            // Update selected state
            document.querySelectorAll('.tool-btn').forEach(btn => {
                btn.classList.toggle('selected', btn.dataset.toolId === tool.id);
            });

            // Update breadcrumb
            breadcrumbTool.textContent = tool.label;

            // Render detail
            renderDetail(tool);
        }

        function renderDetail(tool) {
            const region = REGIONS[activeRegion];

            detailMain.innerHTML = `
                <div class="detail-header">
                    <div class="detail-icon" style="color: ${region.color};">
                        <i data-lucide="${tool.icon}" ${tool.rotate ? 'style="transform: rotate(180deg);"' : ''}></i>
                    </div>
                    <div class="detail-title">
                        <h2>${tool.label}</h2>
                        <div class="detail-badges">
                            <span class="badge">ID: ${tool.id}</span>
                            <span class="badge active">ACTIVE</span>
                        </div>
                    </div>
                </div>

                <div class="detail-grid">
                    <div class="detail-section">
                        <h3>Function Description</h3>
                        <div class="detail-box">
                            <p>${tool.fn}</p>
                        </div>
                    </div>
                    <div class="detail-section">
                        <h3>Changelog</h3>
                        <div class="detail-box mono">
                            <p>${tool.changelog || 'No changelog entries'}</p>
                        </div>
                    </div>
                </div>

                <div class="detail-section" style="margin-top: 24px;">
                    <h3>Video Reference</h3>
                    <div class="detail-box detail-box-large mono">
                        <p>${tool.videoRef || 'No video reference available'}</p>
                    </div>
                </div>
            `;

            lucide.createIcons();
        }

        function switchRegion(regionId) {
            activeRegion = regionId;
            selectedTool = null;
            const region = REGIONS[regionId];

            // Update app data attribute
            app.dataset.activeRegion = regionId;

            // Update tabs
            tabs.forEach(tab => {
                tab.classList.toggle('active', tab.dataset.region === regionId);
            });

            // Update sidebar
            breadcrumbRegion.textContent = region.label;
            breadcrumbTool.textContent = 'Select Tool';
            sidebarAddin.textContent = region.name;
            statusDot.style.background = region.colorVar;

            // Update download
            downloadBtn.href = region.downloadUrl;
            downloadInfo.textContent = region.downloadFile;

            // Render ribbon
            renderRibbon(regionId);

            // Reset detail
            detailMain.innerHTML = `
                <div class="empty-state">
                    <i data-lucide="activity"></i>
                    <span>Select a tool to view specifications</span>
                </div>
            `;
            lucide.createIcons();
        }

        // Event listeners
        tabs.forEach(tab => {
            tab.addEventListener('click', () => switchRegion(tab.dataset.region));
        });

        // Init
        switchRegion('scan');
    </script>
</body>
</html>
